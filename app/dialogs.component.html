<ul class="dialogs_list">
    <li *ngFor="let dialog of getDialogs()" (click)="gotoDialog(dialog.message)" class="dialog_li">
		<div class="user_avatar_div">
			<div class="user_avatar_inner_div">
				<img *ngFor="let img of dialog.photos" [src]="img" class="user_avatar" [class.mini_avatar]="dialog.photos.length > 1" />
			</div>
		</div>

		<div class="dialog_div">
			<div class="dialog_content_div">
				<div class="last_message_date">
					{{dialog.message.date*1000 | date:dialog.date_format}}
				</div>
				<div class="dialog_title_div">
					 <span class="dialog_title_span">
                        <span>
                             {{dialog.title}}
                        </span>
                    </span>
				</div>
				<div class="message_body">
				    <span>
                        <span>
                             {{dialog.sender + ': '}}
                        </span>
                        {{dialog.message.body}}<span class="dialog_attachments" [hidden]="!dialog.attachment_only">[{{dialog.attachment_type}}]</span>
                    </span>
                    <span class="three_dots">...</span>
				</div>
				<div class="unread_marker" [hidden]="dialog.message.read_state"></div>
				<div class="unread_count" [hidden]="!dialog.unread">{{dialog.unread}}</div>
			</div>
		</div>
    </li>
</ul>
<div class="load_old" (click)="loadOldDialogs()" [hidden]="dialogs_count && dialogs_count === dialogs.length">
	<div class="arrow_down"></div>
	<a class="load_old_link">Load previous messages</a>
</div>